# AllFi 业务概览

> 版本：v1.1 | 更新时间：2026-02-11

---

## 1. 产品定位

**AllFi**（All Finance）是一个**开源、自托管的全资产聚合平台**，专为 Web3 从业者和加密资产投资者设计。

**一句话描述**：一个页面，多种计价，看清全局。

**核心差异化**：
- **开源自托管** — 用户完全掌控数据，无需信任第三方
- **全资产覆盖** — CEX + 链上 + DeFi + NFT + 传统资产，一站式聚合
- **隐私优先** — API Key 本地加密、主播模式、无数据上传
- **专业金融级 UI** — Bloomberg/Wind/DeBank 风格，信息密集，低装饰

---

## 2. 目标用户

### 2.1 核心用户画像

| 画像 | 描述 | 典型需求 |
|------|------|---------|
| **Web3 从业者** | 在多个 CEX 和链上有分散持仓的加密从业者 | 快速看到总资产价值，跨平台对比 |
| **加密投资者** | 持有 BTC/ETH 等主流资产 + DeFi 仓位 | 收益率追踪、基准对比、费用分析 |
| **多元资产持有者** | 除加密外还有银行、股票、基金等传统资产 | 全资产视图、统一计价 |
| **注重隐私的投资者** | 不希望将 API Key 交给第三方服务 | 自托管部署、本地加密存储 |

### 2.2 使用场景

1. **晨间检视** — 每天打开 Dashboard 查看总资产变化，用 30 秒掌握全局
2. **直播/录屏** — 开启主播模式一键隐藏金额，安全分享屏幕
3. **月度复盘** — 查看月报，对比 BTC/ETH 基准表现，调整配置
4. **再平衡** — 策略引擎检测偏离，给出再平衡建议
5. **DeFi 监控** — 查看 LP 头寸、质押收益、借贷健康度

---

## 3. 产品架构

```
┌─────────────────────────────────────────────────────┐
│                    前端（Vue 3 / Vite 7）              │
│  Dashboard | Accounts | History | Analytics | Reports │
│  Settings  | Login    | DeFi    | NFT       | ...     │
└──────────────────────┬──────────────────────────────┘
                       │ RESTful API (JSON)
┌──────────────────────┴──────────────────────────────┐
│                    后端（Go 1.24 / net/http）           │
│  API 层 → 服务层 → 仓储层 → 数据层（SQLite3/MySQL）     │
│  ┌─────────────────────────────────────────────────┐  │
│  │ 集成层：Binance / OKX / Coinbase / Etherscan    │  │
│  │         CoinGecko / Alchemy / Yahoo Finance     │  │
│  │         DeFi（Lido/Aave/Uniswap/Compound/Curve）│  │
│  └─────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
```

---

## 4. 核心价值主张

### 4.1 数据主权

| 维度 | AllFi（自托管） | 同类 SaaS 产品 |
|------|----------------|---------------|
| API Key 存储 | 本地 AES-256-GCM 加密 | 托管在第三方服务器 |
| 数据位置 | 用户自己的机器 | 第三方云服务 |
| 隐私保障 | 无数据外传 | 受第三方隐私政策约束 |
| 服务可用性 | 不依赖第三方在线 | 服务商关停则不可用 |
| 审计能力 | 开源代码可审计 | 闭源不可审计 |

### 4.2 资产覆盖广度

| 资产类型 | 支持情况 | 数据来源 |
|---------|---------|---------|
| CEX 交易所 | 3 家（Binance/OKX/Coinbase） | 交易所 API |
| EVM 链上资产 | 钱包管理 3 条链（Ethereum/BSC/Polygon），Etherscan 集成 6 条链 | Etherscan 兼容 API |
| DeFi 仓位 | 7 个协议（Lido/Rocket Pool/Aave/Compound/Uniswap V2&V3/Curve） | 链上合约调用 |
| NFT | ERC-721/ERC-1155 | Alchemy API |
| 传统资产 | 4 类（银行存款/现金/股票/基金） | 手动录入 |

### 4.3 分析深度

- **资产概览** — 总价值 + 24h 变化 + 分类分布
- **历史追踪** — 趋势曲线 + 日历热力图 + 资金变化记录
- **盈亏分析** — 每日 PnL + 归因分析（价格效应 vs 数量效应）
- **集中度分析** — HHI 指数 + Top 5 资产占比
- **基准对比** — 收益率 vs BTC/ETH/S&P500
- **费用追踪** — 交易手续费 + Gas 费 + 提现费
- **健康评分** — 多维度评分（分散度/稳定性/风险/增长）
- **趋势预测** — 线性回归 + 置信度

---

## 5. 竞品对比

### 5.1 同类产品定位

| 产品 | 类型 | 自托管 | 开源 | DeFi | NFT | 传统资产 |
|------|------|--------|------|------|-----|---------|
| **AllFi** | 全资产聚合 | **是** | **是** | **是** | **是** | **是** |
| DeBank | DeFi 组合 | 否 | 否 | 是 | 是 | 否 |
| Zerion | DeFi 钱包 | 否 | 否 | 是 | 是 | 否 |
| CoinStats | 加密追踪 | 否 | 否 | 部分 | 否 | 否 |
| Delta | 投资组合 | 否 | 否 | 部分 | 否 | 是 |
| Kubera | 全资产 | 否 | 否 | 否 | 否 | 是 |

### 5.2 AllFi 独特优势

1. **唯一开源自托管的全资产方案** — 竞品要么不开源，要么不覆盖全资产
2. **CEX + DeFi + 传统资产一体化** — DeBank/Zerion 不覆盖 CEX 和传统资产
3. **隐私零妥协** — API Key 不离开用户机器
4. **专业金融级 UI** — 不是 Token 玩具，而是正经的资产管理工具
5. **可扩展架构** — 插件式集成，社区可贡献新 CEX/链/DeFi 协议

---

## 6. 商业模式

AllFi 是**开源项目**（MIT 协议），核心能力完全免费。

**可能的增值方向**（非当前目标）：

| 方向 | 说明 |
|------|------|
| **托管版** | 为不愿自部署的用户提供托管服务 |
| **高级报告** | AI 驱动的资产分析报告 |
| **更多集成** | 付费提供稀缺 CEX/链的集成插件 |
| **企业版** | 多用户 + 团队管理 + 审计日志 |

**当前阶段重点**：做好产品，建立社区，以开源口碑获取用户。

---

## 7. 技术决策

| 决策 | 选择 | 原因 |
|------|------|------|
| 后端语言 | Go | 高并发 + 静态编译 + 部署简单 |
| 前端框架 | Vue 3 | 轻量 + Composition API + 生态成熟 |
| 数据库 | SQLite3（默认） | 零配置 + 文件级部署 + 够用 |
| 加密方案 | AES-256-GCM | 工业标准 + Go 原生支持 |
| 部署方式 | Docker + 单二进制 | 一行命令部署，无运维负担 |
| 认证方式 | PIN + JWT | 轻量 + 适合单用户自托管 |
| 设计风格 | 金融终端风 | 专业感 + 信息密度高 + 区别于玩具 |

---

## 8. 发展阶段

| 版本 | 阶段 | 状态 | 核心能力 |
|------|------|------|---------|
| v0.1.0 | Alpha | 已完成 | 资产聚合 + 深度功能（DeFi/NFT/交易/策略/成就/报告/通知） |
| v0.2.0 | 体验增强 | 已完成 | 主播模式 + 智能分组 + Gas 加油站 + PIN 认证 + 移动端 + OpenAPI |
| v1.0.0 | 正式版 | 规划中 | 10+ CEX + 10+ 链 + AI 分析 + 健康评分 + 深度移动端 |

---

**文档维护者**: @allfi
**最后更新**: 2026-02-11
